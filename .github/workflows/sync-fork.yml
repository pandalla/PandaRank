  name: 同步上游仓库

  on:
    schedule:
      - cron: '*/5 * * * *'  # 每5分钟检查一次
    workflow_dispatch:         # 支持手动触发

  jobs:
    sync:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout
          uses: actions/checkout@v4
          with:
            token: ${{ secrets.GITHUB_TOKEN }}
            fetch-depth: 0

        - name: 添加上游仓库
          run: |
            git remote add upstream https://github.com/JessyTsui/PandaRank.git
            git fetch upstream

        - name: 同步更新
          run: |
            git checkout master
            git merge upstream/master --no-edit
            git push origin master
